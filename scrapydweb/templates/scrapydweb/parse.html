{% extends 'base.html' %}

{% block title %}upload logfile{% endblock %}

{% block head %}
    <style>
        form {margin: 16px 0;}
        #demo {
            padding-top: 8px; 
            padding-left:12px;
            opacity: 0; 
            cursor: default;
        }
    </style>
{% endblock %}


{% block body %}
<h2>Upload to parse a scrapy log file</h2>
<div class="wrap">
    <form method="post" enctype="multipart/form-data">
        <div class="upload">
            <label class="upload-button">
                <input id='file' type="file" name="file" accept=".log, .log.gz, .gz, .txt" />
                Select
            </label>
            
            <span class="filename">a log/log.gz/gz/txt file</span>
            
            <a href="javascript:;" class="submit" onclick="uploadLogfile();">
                <i class="iconfont icon-upload"></i>
                <a id='demo' class="link" href="{{ url_parse_demo }}">demo</a>
            </a>
        </div>
    </form>
<div>


<script>
my$('#file').onchange = function () {
    //my$('.filename').innerText = this.value;
    my$('.filename').innerText = "a log/log.gz/gz/txt file";
    
    var logfile = my$('#file').files[0];
    if(logfile === undefined) {
        return;
    } else {
        my$('.filename').innerText = logfile.name;
    }
};
</script>
{% endblock %}
